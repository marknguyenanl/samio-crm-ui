steps:

  # 1️⃣ Install dependencies
  install_deps:
    image: node:22-alpine
    environment:
      TMPDIR: /tmp
    commands:
      - echo "Installing dependencies..."
      - npm install
      - npm run build
  # 2️⃣ Build Vue app    environment:

  # 3️⃣ Build and push container image
  build_image:
    image: genuinetools/img:latest
    commands:
      - echo "Building container image..."
      - img build -t harbor.anrostech.com/anros/crm-anros-frontend:latest -f ./Containerfile .
      - echo 'Harbor12345' | img login harbor.anrostech.com --username 'admin' --password-stdin
      - img push harbor.anrostech.com/anros/crm-anros-frontend:latest
    depends_on:
      - install_deps
